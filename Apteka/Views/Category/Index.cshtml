@model IEnumerable<Apteka.t_produkty>


<h2>@ViewBag.Message</h2>

@using (Html.BeginForm()){   
         <p> Nazwa: @Html.TextBox("SearchString") 
         <input type="submit" value="Filtruj" /></p>
        }

<table>
    <tr>
        <th>
            @Html.ActionLink("Cena", (string)ViewBag.ActionName, new { sortModel = "cena" })
        </th>
        <th>
            @Html.ActionLink("Ilość", (string)ViewBag.ActionName, new { sortModel = "ilosc" })
        </th>
        <th>
            @Html.ActionLink("Cena i ilość", (string)ViewBag.ActionName, new { sortModel = "cenailosc" })
        </th>
    </tr> 
</table>

<table>
    <tr>
        <th>
            Nazwa
        </th>
        <th>
            Opakowanie
        </th>
        <th>
            Sklep
        </th>
        <th>
            Cena
        </th>
        <th>
            Ilość
        </th>
        @if (ViewBag.ActionName == "Producent")
        {
        <th>
            Producent
        </th>                
        }
        @if (ViewBag.ActionName == "Internaz")
        {
        <th>
            Nazwa międzynarodowa
        </th>                
        }        
    </tr>

    @foreach (var item in Model) {    
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.t_leki.nazwa_char)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.t_leki.opak_char)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.t_sklepy.Nazwa)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.cena)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ilosc)
        </td>
        @if (ViewBag.ActionName == "Producent")
        {
        <td>
            @Html.DisplayFor(modelItem => item.t_leki.t_producenci.nazwa_char)
        </td>                
        }
        @if (ViewBag.ActionName == "Internaz")
        {
        <td>
            @Html.DisplayFor(modelItem => item.t_leki.t_informacje.t_inter.nazwa_char)
        </td>                
        }
    </tr>    
}
</table>

@if(!(Model.Count()>0))
{
    <h3>Niestety brak wyników, zmień kryterium zapytania...</h3>
    <br />
}